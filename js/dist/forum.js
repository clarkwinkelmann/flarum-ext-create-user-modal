(()=>{var t={n:r=>{var e=r&&r.__esModule?()=>r.default:()=>r;return t.d(e,{a:e}),e},d:(r,e)=>{for(var o in e)t.o(e,o)&&!t.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:e[o]})},o:(t,r)=>Object.prototype.hasOwnProperty.call(t,r),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},r={};(()=>{"use strict";t.r(r),t.d(r,{CreateUserModal:()=>y});const e=flarum.core.compat["common/extend"],o=flarum.core.compat["forum/app"];var n=t.n(o);const a=flarum.core.compat["common/components/Button"];var s=t.n(a);const i=flarum.core.compat["forum/components/SessionDropdown"];var u=t.n(i);function c(t,r){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},c(t,r)}const l=flarum.core.compat["forum/components/SignUpModal"];var d=t.n(l);const p=flarum.core.compat["forum/components/LogInButtons"];var f=t.n(p),y=function(t){var r,e;function o(){return t.apply(this,arguments)||this}e=t,(r=o).prototype=Object.create(e.prototype),r.prototype.constructor=r,c(r,e);var a=o.prototype;return a.title=function(){return n().translator.trans("clarkwinkelmann-create-user-modal.forum.modal.title")},a.className=function(){return t.prototype.className.call(this)+" CreateUserModal"},a.content=function(){return[m(".Modal-body",this.body())]},a.body=function(){return t.prototype.body.call(this).filter((function(t){return!t||t.tag!==f()}))},a.fields=function(){var r=t.prototype.fields.call(this);if(r.has("submit")){var e=r.get("submit");e&&Array.isArray(e.children)&&e.children.length>0&&e.children[0]&&(e.children[0].children=[n().translator.trans("clarkwinkelmann-create-user-modal.forum.modal.submit")])}return r},a.onsubmit=function(t){t.preventDefault(),this.loading=!0,n().request({url:n().forum.attribute("apiUrl")+"/users",method:"POST",body:{data:{attributes:this.submitData()}},errorHandler:this.onerror.bind(this)}).then((function(t){var r=n().store.pushPayload(t);r.pushData({relationships:{groups:{data:[]}}}),m.route.set(n().route.user(r))}),this.loaded.bind(this))},o}(d());n().initializers.add("clarkwinkelmann-create-user-modal",(function(){var t=flarum.extensions["fof-user-directory"];function r(t){n().forum.attribute("clarkwinkelmannCreateUserModal")&&t.add("clarkwinkelmann-create-user-modal",s().component({icon:"fas fa-user-plus",className:"Button",onclick:function(){n().modal.show(y)}},n().translator.trans("clarkwinkelmann-create-user-modal.forum.link")),10)}t&&t.UserDirectoryPage?(0,e.extend)(t.UserDirectoryPage.prototype,"actionItems",r):(0,e.extend)(u().prototype,"items",r)}))})(),module.exports=r})();
//# sourceMappingURL=forum.js.map